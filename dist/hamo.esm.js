import{useCallback as n,useEffect as t,useMemo as e,useLayoutEffect as r,useState as o,useRef as u}from"react";import{raf as i}from"@studio-freight/tempus";import{nanoid as c}from"nanoid";import{useLayoutEffect as f}from"@studio-freight/hamo";import{throttle as a}from"throttle-debounce";function s(e,r){var o=n(function(n){e.current&&!e.current.contains(n.target)&&r()},[e,r]);t(function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o])}var d=function(){return e(function(){return"undefined"!=typeof window&&(window.location.href.includes("#debug")||"development"===process.env.NODE_ENV)},[])},v="undefined"!=typeof window?r:t,l=v,p="undefined"!=typeof window?function(){var n=o(document.readyState),t=n[0],e=n[1];return v(function(){function n(){e(document.readyState)}return e(document.readyState),document.addEventListener("readystatechange",n,!1),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),t}:function(){},m=[],h=function(n){var t=n.type;"string"==typeof n&&(t=n);var e=[];e.push("string"==typeof n?{type:t}:n),m.forEach(function(n){var r=n[0],o=n[1];"string"==typeof r&&r!==t||("function"!=typeof r||r.apply(void 0,e))&&o.apply(void 0,e)})},y=function(n,e,r){return void 0===r&&(r=[]),t(function(){return function(n,t){if(null!=n&&null!=t)return m=[].concat(m,[[n,t]]),function(){m=m.filter(function(n){return n[1]!==t})}}(n,e)},[].concat(r,[e,n])),h};function w(n,e){void 0===e&&(e=0),t(function(){if(n){var t=i.add(n,e);return function(){i.remove(t)}}},[n,e])}function g(){return e(function(){return c()},[])}var b=function(n,e){var r=u();t(function(){r.current=n}),t(function(){if(null!==e){var n=setInterval(function(){r.current()},e);return function(){return clearInterval(n)}}},[e])},E=function(){var t=o(void 0),e=t[0],r=t[1],u=n(function(){r("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)},[]);return v(function(){return u(),window.addEventListener("resize",u,!1),function(){window.removeEventListener("resize",u,!1)}},[]),e},L=function(e){var r=void 0===e?{}:e,i=r.root,c=void 0===i?null:i,f=r.rootMargin,a=void 0===f?"0px":f,s=r.threshold,d=void 0===s?1:s,v=u(),l=o(!1),p=l[0],m=l[1],h=n(function(n){m(n[0].isIntersecting)},[]);return t(function(){var n=new IntersectionObserver(h,{root:c,rootMargin:a,threshold:d});return v.current&&n.observe(v.current),function(){n.disconnect()}},[h]),{setRef:function(n){v.current||(v.current=n)},inView:p}},O=function(t){var e=o(void 0),r=e[0],u=e[1],i=n(function(n){u(n.matches)},[]);return v(function(){var n=window.matchMedia(t);return i(n),n.addEventListener("change",i),function(){n.removeEventListener("change",i)}}),r};function I(){return I=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},I.apply(this,arguments)}function P(n,t){void 0===t&&(t=0);var e=t+n.offsetTop;return n.offsetParent?P(n.offsetParent,e):e}function M(n,t){void 0===t&&(t=0);var e=t+n.offsetLeft;return n.offsetParent?M(n.offsetParent,e):e}function R(n){var t=(void 0===n?{}:n).debounce,e=void 0===t?1e3:t,r=u(),i=o({top:void 0,left:void 0,width:void 0,height:void 0}),c=i[0],s=i[1],d=function(){r.current&&s(function(n){return I({},n,{top:P(r.current),left:M(r.current)})})};f(function(){var n=a(e,d),t=new ResizeObserver(n);return t.observe(document.body),function(){t.disconnect(),n.cancel({upcomingOnly:!0})}},[e]);var v=function(n){var t=n[0].contentRect,e=t.width,r=t.height;s(function(n){return I({},n,{width:e,height:r})})},l=u();return[function(n){var t;n&&n!==r.current&&(null==(t=l.current)||t.disconnect(),l.current=new ResizeObserver(v),l.current.observe(n),r.current=n)},c,function(n,t){return c}]}var S=function(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var r=e(function(){return t&&[t].flat()},[t]),o=e(function(){return n&&[n].flat()},[n]),u=e(function(){return r&&o&&o.map(function(n){var t;return null==(t=r.find(function(t){return t.type===n}))?void 0:t.props.children})},[r,o]);return n[0]?u:u[0]};export{h as dispatch,d as useDebug,p as useDocumentReadyState,y as useEventBus,w as useFrame,g as useId,b as useInterval,E as useIsTouchDevice,L as useIsVisible,l as useLayoutEffect,O as useMediaQuery,s as useOutsideClickEvent,R as useRect,S as useSlots};
//# sourceMappingURL=hamo.esm.js.map
