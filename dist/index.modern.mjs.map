{"version":3,"file":"index.modern.mjs","sources":["../src/hooks/use-click-outside-event.js","../src/utils.js","../src/hooks/use-debug.js","../src/misc/util.js","../src/hooks/use-isomorphic-layout-effect.js","../src/hooks/use-document-ready-state.js","../src/hooks/use-event-bus.js","../src/hooks/use-frame.js","../src/hooks/use-id.js","../src/hooks/use-interval.js","../src/hooks/use-is-touch-device.js","../src/hooks/use-is-visible.js","../src/hooks/use-media-query.js","../src/hooks/use-rect.js","../src/hooks/use-slots.js"],"sourcesContent":["import { useCallback, useEffect } from 'react'\r\n\r\nexport function useOutsideClickEvent(ref, callback) {\r\n  const handleClickOutside = useCallback(\r\n    (event) => {\r\n      if (ref.current && !ref.current.contains(event.target)) {\r\n        callback()\r\n      }\r\n    },\r\n    [ref, callback]\r\n  )\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('mousedown', handleClickOutside)\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside)\r\n    }\r\n  }, [handleClickOutside])\r\n}\r\n\r\nexport default useOutsideClickEvent\r\n","export const isClient = typeof window !== 'undefined'\r\n","import { useMemo } from 'react'\r\nimport { isClient } from '../utils'\r\n\r\nexport const useDebug = () => {\r\n  const debug = useMemo(\r\n    () =>\r\n      (window.location.href.includes('#debug') ||\r\n        process.env.NODE_ENV === 'development') &&\r\n      !window.location.href.includes('#production'),\r\n    []\r\n  )\r\n  return debug\r\n}\r\n\r\nexport default isClient ? useDebug : () => undefined\r\n","export const isBrowser = typeof window !== 'undefined'\r\n\r\nexport const noop = () => {}\r\n\r\nexport const on = (obj, ...args) => {\r\n  if (obj && obj.addEventListener) {\r\n    obj.addEventListener(...args)\r\n  }\r\n}\r\n\r\nexport const off = (obj, ...args) => {\r\n  if (obj && obj.removeEventListener) {\r\n    obj.removeEventListener(...args)\r\n  }\r\n}\r\n","import { useEffect, useLayoutEffect as vanillaUseLayoutEffect } from 'react'\r\nimport { isBrowser } from '../misc/util'\r\n\r\nexport const useLayoutEffect = isBrowser ? vanillaUseLayoutEffect : useEffect\r\n\r\nexport default useLayoutEffect\r\n","import { useState } from 'react'\r\nimport { useLayoutEffect } from './use-isomorphic-layout-effect'\r\n\r\nfunction _useDocumentReadyState() {\r\n  const [readyState, setReadyState] = useState(document.readyState)\r\n\r\n  useLayoutEffect(() => {\r\n    setReadyState(document.readyState)\r\n\r\n    function onStateChange() {\r\n      setReadyState(document.readyState)\r\n    }\r\n\r\n    document.addEventListener('readystatechange', onStateChange, false)\r\n\r\n    return () =>\r\n      document.removeEventListener('readystatechange', onStateChange, false)\r\n  }, [])\r\n\r\n  return readyState\r\n}\r\n\r\nexport const useDocumentReadyState =\r\n  typeof window !== 'undefined' ? _useDocumentReadyState : () => undefined\r\n\r\nexport default useDocumentReadyState\r\n","import { useEffect } from 'react'\r\n\r\nlet subscribers = []\r\n\r\nconst subscribe = (filter, callbackFn) => {\r\n  if (filter === undefined || filter === null) return undefined\r\n  if (callbackFn === undefined || callbackFn === null) return undefined\r\n\r\n  subscribers = [...subscribers, [filter, callbackFn]]\r\n\r\n  return () => {\r\n    subscribers = subscribers.filter(\r\n      (subscriber) => subscriber[1] !== callbackFn\r\n    )\r\n  }\r\n}\r\n\r\nexport const dispatch = (event) => {\r\n  let { type } = event\r\n  if (typeof event === 'string') type = event\r\n\r\n  const args = []\r\n  if (typeof event === 'string') args.push({ type })\r\n  else args.push(event)\r\n\r\n  subscribers.forEach(([filter, callbackFn]) => {\r\n    if (typeof filter === 'string' && filter !== type) return\r\n    if (typeof filter === 'function' && !filter(...args)) return\r\n    callbackFn(...args)\r\n  })\r\n}\r\n\r\nexport const useEventBus = (type, callback, deps = []) => {\r\n  /* eslint-disable */\r\n  useEffect(() => subscribe(type, callback), [...deps, callback, type])\r\n  /* eslint-enable */\r\n\r\n  return dispatch\r\n}\r\n\r\nexport default useEventBus\r\n","import { raf } from '@studio-freight/tempus'\r\nimport { useEffect } from 'react'\r\n\r\nexport function useFrame(callback, priority = 0) {\r\n  useEffect(() => {\r\n    if (callback) {\r\n      const id = raf.add(callback, priority)\r\n\r\n      return () => {\r\n        raf.remove(id)\r\n      }\r\n    }\r\n  }, [callback, priority])\r\n}\r\n\r\nexport default useFrame\r\n","import { nanoid } from 'nanoid'\r\nimport { useMemo } from 'react'\r\n\r\nexport function useId() {\r\n  const id = useMemo(() => nanoid(), [])\r\n\r\n  return id\r\n}\r\n\r\nexport default useId","import { useEffect, useRef } from 'react'\r\n\r\nexport const useInterval = (callback, delay) => {\r\n  const savedCallback = useRef()\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = callback\r\n  })\r\n\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current()\r\n    }\r\n    if (delay !== null) {\r\n      const id = setInterval(tick, delay)\r\n      return () => clearInterval(id)\r\n    }\r\n  }, [delay])\r\n}\r\n\r\nexport default useInterval\r\n","import { useCallback, useState, useEffect } from 'react'\r\nimport { isClient } from '../utils'\r\n\r\nconst useIsTouchDevice = () => {\r\n  const check = useCallback(\r\n    () =>\r\n      'ontouchstart' in window ||\r\n      navigator.maxTouchPoints > 0 ||\r\n      navigator.msMaxTouchPoints > 0,\r\n    []\r\n  )\r\n\r\n  const [isTouchDevice, setIsTouchDevice] = useState(check())\r\n\r\n  const onResize = useCallback(() => {\r\n    setIsTouchDevice(check())\r\n  }, [check])\r\n\r\n  useEffect(() => {\r\n    onResize()\r\n    window.addEventListener('resize', onResize, { passive: true })\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', onResize, { passive: true })\r\n    }\r\n  }, [onResize])\r\n\r\n  return isTouchDevice\r\n}\r\n\r\nexport default isClient ? useIsTouchDevice : () => undefined\r\n","import { useCallback, useEffect, useRef, useState } from 'react'\r\n\r\nexport const useIsVisible = ({\r\n  root = null,\r\n  rootMargin = '0px',\r\n  threshold = 1.0,\r\n  once = false,\r\n} = {}) => {\r\n  const observer = useRef()\r\n  const ref = useRef()\r\n  const [inView, setInView] = useState(false)\r\n\r\n  const setRef = (node) => {\r\n    if (!ref.current) {\r\n      ref.current = node\r\n    }\r\n  }\r\n\r\n  const callbackFunction = useCallback((entries) => {\r\n    const [entry] = entries\r\n    setInView(entry.isIntersecting)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    observer.current = new IntersectionObserver(callbackFunction, {\r\n      root,\r\n      rootMargin,\r\n      threshold,\r\n    })\r\n    if (ref.current) observer.current.observe(ref.current)\r\n    return () => {\r\n      observer.current.disconnect()\r\n    }\r\n  }, [callbackFunction])\r\n\r\n  useEffect(() => {\r\n    if (once && inView) {\r\n      observer.current.disconnect()\r\n    }\r\n  }, [inView])\r\n\r\n  return { setRef, inView }\r\n}\r\n\r\nexport default useIsVisible\r\n","import { useCallback, useMemo, useState, useEffect } from 'react'\r\nimport { isClient } from '../utils'\r\n\r\nconst useMediaQuery = (queryString) => {\r\n  const mediaQuery = useMemo(\r\n    () => window.matchMedia(queryString),\r\n    [queryString]\r\n  )\r\n  const [isMatch, setIsMatch] = useState(mediaQuery.matches)\r\n\r\n  const onChange = useCallback(({ matches }) => {\r\n    setIsMatch(matches)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    onChange(mediaQuery)\r\n\r\n    mediaQuery.addEventListener('change', onChange, { passive: true })\r\n\r\n    return () => {\r\n      mediaQuery.removeEventListener('change', onChange, { passive: true })\r\n    }\r\n  }, [mediaQuery, onChange])\r\n\r\n  return isMatch\r\n}\r\n\r\nexport default isClient ? useMediaQuery : () => undefined\r\n","import { useCallback, useEffect, useRef, useState } from 'react'\r\nimport { throttle } from 'throttle-debounce'\r\n\r\nexport function offsetTop(element, accumulator = 0) {\r\n  const top = accumulator + element.offsetTop\r\n  if (element.offsetParent) {\r\n    return offsetTop(element.offsetParent, top)\r\n  }\r\n  return top\r\n}\r\n\r\nexport function offsetLeft(element, accumulator = 0) {\r\n  const left = accumulator + element.offsetLeft\r\n  if (element.offsetParent) {\r\n    return offsetLeft(element.offsetParent, left)\r\n  }\r\n  return left\r\n}\r\n\r\nexport function useRect({\r\n  // ignoreTransform = true,\r\n  lazy = false,\r\n  debounce = 1000,\r\n} = {}) {\r\n  const element = useRef()\r\n  const resizeObserver = useRef()\r\n\r\n  const [rect, setRect] = useState({})\r\n  const lazyRect = useRef(rect)\r\n\r\n  const resize = useCallback(() => {\r\n    if (element.current) {\r\n      const top = offsetTop(element.current)\r\n      const left = offsetLeft(element.current)\r\n\r\n      lazyRect.current = { ...lazyRect.current, top, left }\r\n      if (!lazy) {\r\n        setRect(lazyRect.current)\r\n      }\r\n    }\r\n  }, [lazy])\r\n\r\n  // resize if body height changes\r\n  useEffect(() => {\r\n    const callback = throttle(debounce, resize)\r\n    const resizeObserver = new ResizeObserver(callback)\r\n    resizeObserver.observe(document.body)\r\n\r\n    return () => {\r\n      resizeObserver.disconnect()\r\n      callback.cancel({ upcomingOnly: true })\r\n    }\r\n  }, [debounce, resize])\r\n\r\n  const onResizeObserver = useCallback(\r\n    ([entry]) => {\r\n      const { width, height } = entry.contentRect\r\n      // const { inlineSize: width, blockSize: height } = entry.borderBoxSize[0];\r\n\r\n      lazyRect.current = { ...lazyRect.current, width, height }\r\n      if (!lazy) {\r\n        setRect(lazyRect.current)\r\n      }\r\n    },\r\n    [lazy]\r\n  )\r\n\r\n  const getRect = useCallback(() => lazyRect.current, [])\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      // avoid strict mode double execution\r\n      if (process.env.NODE_ENV !== 'development') {\r\n        // disconnect resizeObserver on unmount\r\n        resizeObserver.current?.disconnect()\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const setRef = useCallback(\r\n    (node) => {\r\n      if (!node || node === element.current) return\r\n\r\n      resizeObserver.current?.disconnect()\r\n      resizeObserver.current = new ResizeObserver(onResizeObserver)\r\n      resizeObserver.current.observe(node)\r\n      element.current = node\r\n    },\r\n    [resize]\r\n  )\r\n\r\n  return [setRef, lazy ? getRect : rect]\r\n}\r\n\r\nexport default useRect\r\n","// https://medium.com/swlh/bring-vue-named-slots-to-react-87684188f18e\r\n\r\nimport { useMemo } from 'react'\r\n\r\nexport const useSlots = (types = [], children = []) => {\r\n  const _children = useMemo(() => children && [children].flat(), [children])\r\n  const _types = useMemo(() => types && [types].flat(), [types])\r\n  const slots = useMemo(\r\n    () =>\r\n      _children &&\r\n      _types &&\r\n      _types.map(\r\n        // @ts-ignore\r\n        (type) => _children.find((el) => el.type === type)?.props.children\r\n      ),\r\n    [_children, _types]\r\n  )\r\n\r\n  return types[0] ? slots : slots[0]\r\n}\r\n\r\nexport default useSlots\r\n"],"names":["useOutsideClickEvent","ref","callback","handleClickOutside","useCallback","event","current","contains","target","useEffect","document","addEventListener","removeEventListener","isClient","window","useDebug$1","useMemo","location","href","includes","process","env","NODE_ENV","isBrowser","useLayoutEffect","vanillaUseLayoutEffect","useDocumentReadyState","readyState","setReadyState","useState","onStateChange","undefined","subscribers","dispatch","type","args","push","forEach","filter","callbackFn","useEventBus","deps","subscriber","subscribe","useFrame","priority","id","raf","add","remove","useId","nanoid","useInterval","delay","savedCallback","useRef","setInterval","clearInterval","useIsTouchDevice$1","check","navigator","maxTouchPoints","msMaxTouchPoints","isTouchDevice","setIsTouchDevice","onResize","passive","useIsVisible","root","rootMargin","threshold","once","observer","inView","setInView","entries","entry","isIntersecting","IntersectionObserver","callbackFunction","observe","disconnect","setRef","node","useMediaQuery$1","queryString","mediaQuery","matchMedia","isMatch","setIsMatch","matches","onChange","offsetTop","element","accumulator","top","offsetParent","offsetLeft","left","lazy","debounce","resizeObserver","rect","setRect","lazyRect","resize","_extends","throttle","ResizeObserver","body","cancel","upcomingOnly","onResizeObserver","width","height","contentRect","getRect","_resizeObserver$curre","_resizeObserver$curre2","useSlots","types","children","_children","flat","_types","slots","map","find","el","_children$find","props"],"mappings":"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"}