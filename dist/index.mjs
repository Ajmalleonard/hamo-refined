import{useCallback as n,useEffect as t,useMemo as e,useLayoutEffect as r,useState as o,useRef as u}from"react";import{raf as i}from"@studio-freight/tempus";import{nanoid as c}from"nanoid";import{throttle as f}from"throttle-debounce";function a(e,r){var o=n(function(n){e.current&&!e.current.contains(n.target)&&r()},[e,r]);t(function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o])}var d=function(){return e(function(){return"undefined"!=typeof window&&(window.location.href.includes("#debug")||"development"===process.env.NODE_ENV)},[])},s="undefined"!=typeof window?r:t,v="undefined"!=typeof window?function(){var n=o(document.readyState),t=n[0],e=n[1];return s(function(){function n(){e(document.readyState)}return e(document.readyState),document.addEventListener("readystatechange",n,!1),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),t}:function(){},p=[],l=function(n){var t=n.type;"string"==typeof n&&(t=n);var e=[];e.push("string"==typeof n?{type:t}:n),p.forEach(function(n){var r=n[0],o=n[1];"string"==typeof r&&r!==t||("function"!=typeof r||r.apply(void 0,e))&&o.apply(void 0,e)})},m=function(n,e,r){return void 0===r&&(r=[]),t(function(){return function(n,t){if(null!=n&&null!=t)return p=[].concat(p,[[n,t]]),function(){p=p.filter(function(n){return n[1]!==t})}}(n,e)},[].concat(r,[e,n])),l};function h(n,e){void 0===e&&(e=0),t(function(){if(n){var t=i.add(n,e);return function(){i.remove(t)}}},[n,e])}function w(){return e(function(){return c()},[])}var y=function(n,e){var r=u();t(function(){r.current=n}),t(function(){if(null!==e){var n=setInterval(function(){r.current()},e);return function(){return clearInterval(n)}}},[e])},g="undefined"!=typeof window,b=g?function(){var e=n(function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},[]),r=o(e()),u=r[0],i=r[1],c=n(function(){i(e())},[e]);return t(function(){return c(),window.addEventListener("resize",c,{passive:!0}),function(){window.removeEventListener("resize",c,{passive:!0})}},[c]),u}:function(){},E=function(e){var r=void 0===e?{}:e,i=r.root,c=void 0===i?null:i,f=r.rootMargin,a=void 0===f?"0px":f,d=r.threshold,s=void 0===d?1:d,v=r.once,p=void 0!==v&&v,l=u(),m=u(),h=o(!1),w=h[0],y=h[1],g=n(function(n){y(n[0].isIntersecting)},[]);return t(function(){return l.current=new IntersectionObserver(g,{root:c,rootMargin:a,threshold:s}),m.current&&l.current.observe(m.current),function(){l.current.disconnect()}},[g]),t(function(){p&&w&&l.current.disconnect()},[w]),{setRef:function(n){m.current||(m.current=n)},inView:w}},L=g?function(r){var u=e(function(){return window.matchMedia(r)},[r]),i=o(u.matches),c=i[0],f=i[1],a=n(function(n){f(n.matches)},[]);return t(function(){return a(u),u.addEventListener("change",a,{passive:!0}),function(){u.removeEventListener("change",a,{passive:!0})}},[u,a]),c}:function(){};function O(){return O=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},O.apply(this,arguments)}function P(n,t){void 0===t&&(t=0);var e=t+n.offsetTop;return n.offsetParent?P(n.offsetParent,e):e}function z(n,t){void 0===t&&(t=0);var e=t+n.offsetLeft;return n.offsetParent?z(n.offsetParent,e):e}function I(e){var r=void 0===e?{}:e,i=r.lazy,c=void 0!==i&&i,a=r.debounce,d=void 0===a?1e3:a,s=u(),v=u(),p=o({}),l=p[0],m=p[1],h=u(l),w=n(function(){if(s.current){var n=P(s.current),t=z(s.current);h.current=O({},h.current,{top:n,left:t}),c||m(h.current)}},[c]);t(function(){var n=f(d,w),t=new ResizeObserver(n);return t.observe(document.body),function(){t.disconnect(),n.cancel({upcomingOnly:!0})}},[d,w]);var y=n(function(n){var t=n[0].contentRect;h.current=O({},h.current,{width:t.width,height:t.height}),c||m(h.current)},[c]),g=n(function(){return h.current},[]);return t(function(){return function(){var n;"development"!==process.env.NODE_ENV&&(null==(n=v.current)||n.disconnect())}},[]),[n(function(n){var t;n&&n!==s.current&&(null==(t=v.current)||t.disconnect(),v.current=new ResizeObserver(y),v.current.observe(n),s.current=n)},[w]),c?g:l]}var M=function(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var r=e(function(){return t&&[t].flat()},[t]),o=e(function(){return n&&[n].flat()},[n]),u=e(function(){return r&&o&&o.map(function(n){var t;return null==(t=r.find(function(t){return t.type===n}))?void 0:t.props.children})},[r,o]);return n[0]?u:u[0]};export{l as dispatch,d as useDebug,v as useDocumentReadyState,m as useEventBus,h as useFrame,w as useId,y as useInterval,b as useIsTouchDevice,E as useIsVisible,s as useLayoutEffect,L as useMediaQuery,a as useOutsideClickEvent,I as useRect,M as useSlots};
//# sourceMappingURL=index.mjs.map
