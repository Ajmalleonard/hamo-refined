{"version":3,"file":"index.js","sources":["../src/hooks/use-debug.js","../src/hooks/use-frame.js","../src/hooks/use-interval.js","../src/hooks/use-is-touch-device.js","../src/hooks/use-media-query.js","../src/hooks/use-rect/index.js","../src/hooks/use-slots.js"],"sourcesContent":["import { useRouter } from 'next/router'\nimport { useMemo } from 'react'\n\nexport const useDebug = () => {\n  const router = useRouter()\n\n  const debug = useMemo(() => {\n    return (\n      router.asPath.includes('#debug') || process.env.NODE_ENV === 'development'\n    )\n  }, [router])\n\n  return debug\n}\n","import { raf } from '@react-spring/rafz'\nimport { useLayoutEffect, useMemo } from 'react'\nimport { v4 as uuidv4 } from 'uuid'\n\n// https://github.com/pmndrs/react-spring/tree/master/packages/rafz#readme\n\nconst callbacks = {}\n\nraf.onFrame(() => {\n  Object.entries(callbacks)\n    .sort((a, b) => a[1].priority - b[1].priority)\n    .forEach(([, { callback }]) => {\n      callback(raf.now())\n    })\n  return true\n})\n\nexport function useFrame(callback, priority = 0, deps = []) {\n  const id = useMemo(() => uuidv4(), [])\n\n  useLayoutEffect(() => {\n    if (callback) {\n      callbacks[id] = { callback, priority }\n\n      return () => {\n        delete callbacks[id]\n      }\n    }\n  }, [callback, id, priority, ...deps])\n}\n","import { useEffect, useRef } from 'react'\n\nexport const useInterval = (callback, delay) => {\n  const savedCallback = useRef()\n\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n","import { useLayoutEffect, useState } from 'react'\n\nexport const useIsTouchDevice = () => {\n  const [isTouchDevice, setIsTouchDevice] = useState(undefined)\n\n  useLayoutEffect(() => {\n    const onResize = () => {\n      setIsTouchDevice(\n        'ontouchstart' in window ||\n          navigator.maxTouchPoints > 0 ||\n          navigator.msMaxTouchPoints > 0\n      )\n    }\n\n    onResize()\n    window.addEventListener('resize', onResize, false)\n\n    return () => {\n      window.removeEventListener('resize', onResize, false)\n    }\n  }, [])\n\n  return isTouchDevice\n}\n","import { useEffect, useState } from 'react'\n\nexport const useMediaQuery = (queryString) => {\n  const [isMatch, setIsMatch] = useState(undefined)\n\n  const mqChange = (mq) => {\n    setIsMatch(mq.matches)\n  }\n\n  useEffect(() => {\n    const mq = window.matchMedia(queryString)\n    mqChange(mq)\n\n    try {\n      mq?.addEventListener('change', mqChange)\n    } catch (e1) {\n      try {\n        mq?.addListener(mqChange)\n      } catch (e2) {\n        console.error(e2)\n      }\n    }\n\n    return () => {\n      try {\n        mq?.removeEventListener('change', mqChange)\n      } catch (e1) {\n        try {\n          mq?.removeListener(mqChange)\n        } catch (e2) {\n          console.error(e2)\n        }\n      }\n    }\n  })\n\n  return isMatch\n}\n","import { debounce as _debounce } from 'debounce'\nimport { useLayoutEffect, useRef, useState } from 'react'\nimport { useMeasure, useWindowSize } from 'react-use'\n\nexport function offsetTop(element, accumulator = 0) {\n  const top = accumulator + element.offsetTop\n  if (element.offsetParent) {\n    return offsetTop(element.offsetParent, top)\n  }\n  return top\n}\n\nexport function offsetLeft(element, accumulator = 0) {\n  const left = accumulator + element.offsetLeft\n  if (element.offsetParent) {\n    return offsetLeft(element.offsetParent, left)\n  }\n  return left\n}\n\nfunction _useRect(debounce = 1000) {\n  const ref = useRef()\n  const [refMeasure, { width, height }] = useMeasure()\n  const { width: windowWidth, height: windowHeight } = useWindowSize()\n  const [left, setLeft] = useState()\n  const [top, setTop] = useState()\n\n  // resize if body height changes\n  useLayoutEffect(() => {\n    const callback = _debounce(resize, debounce)\n    const resizeObserver = new ResizeObserver(callback)\n    resizeObserver.observe(document.body)\n\n    return () => {\n      resizeObserver.disconnect()\n      callback.flush()\n    }\n  }, [debounce])\n\n  const resize = () => {\n    if (ref.current) {\n      setTop(offsetTop(ref.current))\n      setLeft(offsetLeft(ref.current))\n    }\n  }\n\n  const compute = (scrollY = 0) => {\n    const rect = {\n      top: top - scrollY,\n      left: left,\n      height: height,\n      width: width,\n      bottom: windowHeight - (top - scrollY + height),\n      right: windowWidth - (left + width),\n    }\n    const inView = rect.top + rect.height > 0 && rect.bottom + rect.height > 0\n\n    return { ...rect, inView }\n  }\n\n  const setRef = (node) => {\n    ref.current = node\n    refMeasure(node)\n    resize()\n  }\n\n  return [setRef, compute]\n}\n\nexport const useRect =\n  typeof window !== 'undefined' ? _useRect : () => [() => {}, undefined]\n","// https://medium.com/swlh/bring-vue-named-slots-to-react-87684188f18e\n\nimport { useMemo } from 'react'\n\nexport const useSlots = (types = [], children = []) => {\n  const _children = useMemo(() => children && [children].flat(), [children])\n  const _types = useMemo(() => types && [types].flat(), [types])\n  const slots = useMemo(\n    () =>\n      _children &&\n      _types &&\n      _types.map(\n        (type) => _children.find((el) => el.type === type)?.props.children\n      ),\n    [_children, _types]\n  )\n\n  return types[0] ? slots : slots[0]\n}\n"],"names":["useDebug","router","useRouter","useMemo","asPath","includes","process","env","NODE_ENV","callbacks","useFrame","callback","priority","deps","id","uuidv4","useLayoutEffect","raf","onFrame","Object","entries","sort","a","b","forEach","now","useInterval","delay","savedCallback","useRef","useEffect","current","let","setInterval","clearInterval","useIsTouchDevice","isTouchDevice","setIsTouchDevice","useState","undefined","onResize","window","navigator","maxTouchPoints","msMaxTouchPoints","addEventListener","removeEventListener","useMediaQuery","isMatch","setIsMatch","mqChange","mq","matches","matchMedia","queryString","e1","addListener","e2","console","error","removeListener","offsetTop","element","accumulator","top","offsetParent","offsetLeft","left","_useRect","debounce","ref","refMeasure","width","height","useMeasure","windowWidth","windowHeight","useWindowSize","setLeft","setTop","resize","_debounce","resizeObserver","ResizeObserver","observe","document","body","disconnect","flush","node","scrollY","rect","bottom","right","inView","useRect","useSlots","types","children","_children","flat","_types","slots","map","find","el","type","props"],"mappings":"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"}